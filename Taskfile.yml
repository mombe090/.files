version: 3

tasks:
  default:
    desc: Show available tasks
    cmds:
      - task --list

  replacetokens:
    desc: Replace tokens in config files using environment variables
    cmds:
      - direnv allow
      - |
        bunx replacetokens \
          --sources "nushell/.config/nushell/**/*.nu" \
          --token-pattern 'default' \
          --encoding 'utf-8' \
          --use-env \
          --log-level 'info'
        echo "Token replacement completed for environment: {{.env}}"
    silent: true
